<mat-card *ngIf="proposal" class="proposal">
  <mat-card-title>
    {{ proposal.title | translateText }}
    <span class="pull-right">
      <mat-icon *ngIf="proposal.sector" matTooltip="{{ enums.Sector[proposal.sector] | translate }}">
        {{ proposal.getSectorIcon() }}
      </mat-icon>
      <mat-icon *ngIf="proposal.policyLevel === enums.PolicyLevel.federal" matTooltip="{{ 'federal' | translate }}"
        svgIcon="belgium">
      </mat-icon>
      <mat-icon *ngIf="proposal.policyLevel === enums.PolicyLevel.flemish" matTooltip="{{ 'flemish' | translate }}"
        svgIcon="flanders">
      </mat-icon>
      <mat-icon *ngIf="proposal.policyLevel === enums.PolicyLevel.wallonian" matTooltip="{{ 'wallonian' | translate }}"
        svgIcon="wallonia">
      </mat-icon>
    </span>
  </mat-card-title>
  <p>{{ proposal.summary | translateText }}</p>

  <mat-button-toggle-group class="variants" appearance="legacy" name="variant" [(ngModel)]="selectedAmbitionLevel">
    <mat-button-toggle [value]="0" (click)="clearVariant()">
      <div class="ambition-level">
        <div class="ambition-level-title">X</div>
      </div>
    </mat-button-toggle>
    <mat-button-toggle *ngFor="let variant of proposal.variants" [value]="variant.ambitionLevel" (click)="updateSelected(variant)">
      <div class="ambition-level">
        <div class="ambition-level-title" fxHide.lt-sm>{{ variant.ambitionLevel }}</div>
        <div class="ambition-level-body">
          <span class="ambition-level-body-icons">
            <span class="ambition-level-reduction">
              <mat-icon class="inline">cloud_download</mat-icon> {{ variant.getTargetAmount(enums.TargetType.ghgReduction) | number }} kt
            </span>
            <span class="ambition-level-cost" fxHide.lt-lg>
              <mat-icon class="inline" style="margin-left: 12px">euro</mat-icon> {{ variant.getTotalCost() | number }}
            </span>
          </span>
          <span class="ambition-level-body-text" fxHide.lt-lg>{{ variant.description | translateText }}</span>
        </div>
      </div>
    </mat-button-toggle>
  </mat-button-toggle-group>

  <div class="variant-body">
    <div *ngIf="selectedVariant">
      <!-- ambitionLevel: number = 1;
      description: TranslatedText[] = [];
      targets: Target[] = [];
      costInitial: number = 0;
      costPerYear?: { [year: number]: number } | number;
      impacts: Impact[] = []; -->
      <div fxLayout fxLayoutGap="12px">
        <div fxFlex="40%">
          <h3>{{ 'Cost' | translate }}</h3>
          <div>{{ 'Initial cost' | translate }}: € {{ selectedVariant.costInitial | number }}</div>
          <div *ngIf="selectedVariant.costPerYearFixed">{{ 'Yearly cost' | translate }}: € {{ selectedVariant.costPerYearFixed | number }}</div>
          <div><label>{{ 'Total cost' | translate }}: € {{ selectedVariant.getTotalCost() | number }}</label></div>
        </div>
        <div fxFlex="20%">
          <h3>{{ 'Targets' | translate }}</h3>
          <div *ngIf="selectedVariant.getTargetAmount(enums.TargetType.ghgReduction); let amount;">
            <mat-icon class="inline">cloud_download</mat-icon> {{ amount | number }} kt
          </div>
          <div *ngIf="selectedVariant.getTargetAmount(enums.TargetType.energyEfficiency); let amount;">
            <mat-icon class="inline">savings</mat-icon> {{ amount | number }} GWh
          </div>
          <div *ngIf="selectedVariant.getTargetAmount(enums.TargetType.renewableEnergy); let amount;">
            <mat-icon class="inline">wb_sunny</mat-icon> {{ amount | number }} GWh
          </div>
        </div>
        <div fxFlex="40%" *ngIf="selectedVariant.impacts && selectedVariant.impacts.length > 1">
          <h3>{{ 'Impact' | translate }}</h3>
          <div *ngFor="let impact of selectedVariant.impacts">
            <mat-icon class="inline icon-list-item" [class]="impact.getImpactAmountClass()" matTooltip="{{ enums.ImpactDomain[impact.domain] | translate }}">{{ impact.getImpactDomainIcon() }}</mat-icon>
            {{ enums.ImpactDomain[impact.domain] | translate }}: {{ enums.ImpactAmount[impact.amount] | translate }}
          </div>
        </div>
      </div>

    </div>

    <div *ngIf="!selectedVariant">
      {{ 'This proposal is not selected' | translate }}
    </div>
  </div>
</mat-card>
