<div *ngIf="results$ | async; let results">
  <mat-card class="result-section">
    <h2>
      <mat-icon class="inline">cloud_download</mat-icon><app-help-widget tooltipKey="helpCo2reductionTarget" textKey="CO2 reduction" dialogKey="helpDialogCo2reductionTarget"></app-help-widget> {{ 'by 2030' }}
    </h2>
    <div class="numerical">
      <span class="amount-selected" [class]="'color-' + results.ghgReductionColor">{{ results.ghgReducedKt | number }}</span>
      /
      <span class="amount-required">{{ ghgGapCumulativeKt | number }}</span> kt
    </div>

    <mat-progress-bar class="progress" mode="determinate"
      [color]="results.ghgReductionColor"
      [value]="results.ghgReductionPercentage">
    </mat-progress-bar>

    <div *ngIf="results.ghgReductionPercentage < 100">
      {{ 'Since the target reduction is not met, this amounts to a carbon tax of ' }}
      <span class="color-warn">€ {{ results.ghgTax | number }}</span>.
    </div>

    <div *ngIf="results.ghgReductionPercentage >= 100">
      {{ 'Good job! Your selection of measures meets the European target.' }}
      <span *ngIf="results.ghgReductionPercentage >= 100">
        {{ 'By selling excess emission rights, Belgium will receive an additional amount of ' }}
        <span class="color-accent">€ {{ results.ghgIncome | number }}</span> {{ 'from the EU.' }}
      </span>
    </div>
  </mat-card>

  <mat-card class="result-section">
    <h2><mat-icon class="inline">savings</mat-icon> {{ 'Improved energy efficiency by 2030' | translate }}</h2>
    <div class="numerical">
      <span class="amount-selected" [class]="'color-' + results.energySavedColor">{{ results.energySavedGwh | number }}</span>
      /
      <span class="amount-required">{{ eeGapTargetGwh | number }}</span> GWh
    </div>

    <mat-progress-bar class="progress" mode="determinate"
      [color]="results.energySavedColor"
      [value]="results.energySavedPercentage">
    </mat-progress-bar>

    <div *ngIf="results.energySavedPercentage < 100">
      {{ 'Your selection of measures is not enough to meet the European target. Try selecting more.' }}
    </div>

    <div *ngIf="results.energySavedPercentage >= 100">
      {{ 'Good job! Your selection of measures meets the European target' }}
    </div>
  </mat-card>

  <mat-card class="result-section">
    <h2><mat-icon class="inline">wb_sunny</mat-icon> {{ 'Renewable energy added by 2030' | translate }}</h2>
    <div class="numerical">
      <span class="amount-selected" [class]="'color-' + results.renewableEnergyAddedColor">{{ results.reAddedGwh | number }}</span>
      /
      <span class="amount-required">{{ reGapTargetGwh | number }}</span> GWh
    </div>

    <mat-progress-bar class="progress" mode="determinate"
      [color]="results.renewableEnergyAddedColor"
      [value]="results.reAddedPercentage">
    </mat-progress-bar>

    <div *ngIf="results.reAddedPercentage < 100">
      {{ 'Your selection of measures is not enough to meet the European target. Try selecting more.' }}
    </div>

    <div *ngIf="results.reAddedPercentage >= 100">
      {{ 'Good job! Your selection of measures meets the European target' }}
    </div>
  </mat-card>

  <mat-card class="result-section">
    <h2><mat-icon class="inline">sell</mat-icon> {{ 'Total cost' | translate }}</h2>
    <div class="numerical">
      <div class="amount-selected">{{ 'Total measures cost' }}: € {{ results.totalCost | number }}</div>
      <div class="amount-selected">{{ 'Including emission trading' }}:
        <span [class.color-accent]="results.totalCost + results.ghgTax < 0"> € {{ results.totalCost + results.ghgTax | number }}</span></div>
    </div>
  </mat-card>

  <mat-card class="result-section">
    <h2><mat-icon class="inline">public</mat-icon> {{ 'Total impact' | translate }}</h2>
    <div *ngFor="let impactItem of results.totalImpact">
      <mat-icon class="inline icon-list-item" [class]="impactItem.class" matTooltip="{{ enums.ImpactDomain[impactItem.domain] | translate }}">{{ impactItem.getImpactDomainIcon() }}</mat-icon>
      {{ enums.ImpactDomain[impactItem.domain] | translate }}: {{ impactItem.amount }}
    </div>
  </mat-card>
</div>

<button mat-raised-button color="primary" (click)="submit()">{{ 'I am happy with these results, publish!' | translate }}</button>
