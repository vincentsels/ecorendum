<div *ngIf="proposal" [class.page-container]="!dialog">
  <app-proposal-header [proposal]="proposal" (closeDialog)="closeDialog()"></app-proposal-header>

  <div *ngIf="proposal.description">
    <h2 class="clear">{{ 'Description' | translate }}</h2>

    <markdown [data]="proposal.description | translateText"></markdown>
  </div>

  <h2 class="clear">{{ 'Variants' | translate }}</h2>

  <div class="variant-list">
    <mat-card class="variant" *ngFor="let variant of proposal.variants">
      <h3 *ngIf="proposal.variants.length > 1">{{ variant.ambitionLevel }} - {{ variant.title | translateTextAsync | async }}</h3>

      <div class="variant-body">
        <p *ngIf="proposal.variants.length > 1">{{ variant.description | translateTextAsync | async }}</p>

        <div class="variant-body-numbers" fxLayout fxLayoutGap="12px">
          <div>
            <h3>{{ 'Cost' | translate }}</h3>
            <div>{{ 'Initial' | translate }}: €&nbsp;{{ variant.costInitial | number }}</div>
            <div *ngIf="variant.costPerYearFixed">{{ 'Yearly' | translate }}: €&nbsp;{{ variant.costPerYearFixed | number }}</div>
            <div><label>{{ 'Total' | translate }}: €&nbsp;{{ variant.getTotalCost() | number }}</label></div>
          </div>

          <div>
            <h3>{{ 'Targets' | translate }}</h3>
            <div *ngIf="variant.getTargetAmount(enums.TargetType.ghgReduction); let amount;">
              <mat-icon class="inline">cloud_download</mat-icon> {{ amount | number }} kt
            </div>
            <div *ngIf="variant.getTargetAmount(enums.TargetType.energyEfficiency); let amount;">
              <mat-icon class="inline">savings</mat-icon> {{ amount | number }} GWh
            </div>
            <div *ngIf="variant.getTargetAmount(enums.TargetType.renewableEnergy); let amount;">
              <mat-icon class="inline">wb_sunny</mat-icon> {{ amount | number }} GWh
            </div>
          </div>
          <div *ngIf="variant.impacts && variant.impacts.length > 1">
            <h3>{{ 'Impact' | translate }}</h3>
            <div *ngFor="let impact of variant.impacts" ngClass.xs="impact-xs">
              <mat-icon class="inline icon-list-item" [class]="impact.getImpactAmountClass()" matTooltip="{{ enums.ImpactDomain[impact.domain] | translate }}">{{ impact.getImpactDomainIcon() }}</mat-icon>
              <span fxHide.lt-sm>{{ enums.ImpactDomain[impact.domain] | translate }}</span><span fxHide.lt-md>: {{ enums.ImpactAmount[impact.amount] | translate }}</span>
            </div>
          </div>
        </div>

        <mat-button-toggle [checked]="variant.selected" (change)="updateSelected(variant)">
          <span *ngIf="variant.selected"><mat-icon class="inline" style="width: 16px;">checked</mat-icon> {{ 'Selected' | translate }}</span>
          <span *ngIf="!variant.selected">{{ 'Select' | translate }}</span>
        </mat-button-toggle>
      </div>
    </mat-card>
  </div>
</div>
